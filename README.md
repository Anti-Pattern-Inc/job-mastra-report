# job-mastra-report

mastra製で週報、月報を作成する

## 初期設定

1. packageをinstall

```bash
pnpm install
```

## サーバー起動方法

```bash
pnpm run dev
```

## 開発ツール

### コードフォーマット・リント

#### 利用可能なコマンド

```bash
# コードフォーマット
pnpm run format          # 自動フォーマット実行
pnpm run format:check    # フォーマット確認のみ

# コードリント
pnpm run lint           # コード品質チェック
pnpm run lint:fix       # 自動修正付きチェック

# 型チェック
pnpm run type-check     # TypeScript型チェック
```

#### 自動実行タイミング

| タイミング     | 実行内容                          | 対象ファイル             |
| -------------- | --------------------------------- | ------------------------ |
| **コミット時** | ESLint修正 + Prettierフォーマット | ステージングファイルのみ |
| **CI/CD時**    | lint + format:check + type-check  | 全ファイル               |

#### 効果

- **ESLint**: 未使用変数削除、型エラー修正、コード品質向上
- **Prettier**: インデント統一、引用符統一、改行・スペース整理
- **自動化**: コミット時に自動修正されるため、常に綺麗なコードが保たれる

## 開発フロー

### 基本的な開発手順

```bash
# 1. 通常通りコードを書く
# （何も特別なことはしなくてOK）

# 2. ファイルをステージング
git add .

# 3. コミット（この時点で自動修正が実行される）
git commit -m "feat: 新機能を追加"

# 4. プッシュ
git push
```

### 🤖 自動実行される内容

**コミット時に自動で実行**:

- ESLintによるコード修正（可能な範囲）
- Prettierによるフォーマット
- 修正されたファイルの再ステージング

**結果**: 開発者は通常の作業をするだけで、常に綺麗なコードがコミットされる ✨

### ⚠️ 注意点とトラブルシューティング

#### コミットが失敗する場合

自動修正できないエラーがある場合、コミットが中断されます：

```bash
# エラー例
✖ ESLint found problems that cannot be fixed automatically
```

**対処法**:

```bash
# 1. 手動でlintを実行してエラー箇所を確認
pnpm run lint

# 2. エラーを手動修正

# 3. 再度コミット
git commit -m "fix: エラー修正"
```

#### 事前にチェックしたい場合

```bash
# コミット前に自分でチェック（任意）
pnpm run lint           # エラーチェック
pnpm run format         # フォーマット実行
pnpm run type-check     # 型チェック
```

### 🚀 推奨開発フロー

1. **普通にコーディング** - 特別なことは不要
2. **定期的な確認**（任意）- `pnpm run lint` でエラーチェック
3. **コミット** - 自動修正に任せる
4. **エラー時のみ手動修正** - 自動修正できない問題のみ対応
